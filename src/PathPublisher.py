#!/usr/bin/env python
import rospy
from nav_msgs.msg import Path
from geometry_msgs.msg import PoseStamped

def create_path_message(points):
    path = Path()
    path.header.frame_id = "map"  # Change as per your frame
    path.header.stamp = rospy.Time.now()

    for point in points:
        pose = PoseStamped()
        pose.header = path.header
        pose.pose.position.x = point[0]
        pose.pose.position.y = point[1]
        pose.pose.orientation.w = 1.0  # Assuming no orientation change
        path.poses.append(pose)

    return path

def path_publisher():
    rospy.init_node('path_publisher', anonymous=True)
    path_pub = rospy.Publisher('/path', Path, queue_size=10)

    rate = rospy.Rate(1)  # 1 Hz, adjust as needed
    points = [[0.0, -0.0], [0.00759612349389599, -0.08682408883346517], [0.030153689607045786, -0.17101007166283436], [0.06698729810778065, -0.24999999999999997], [0.116977778440511, -0.3213938048432696], [0.17860619515673032, -0.383022221559489], [0.24999999999999994, -0.4330127018922193], [0.32898992833716556, -0.46984631039295416], [0.4131759111665348, -0.492403876506104], [0.49999999999999994, -0.5], [0.5868240888334652, -0.492403876506104], [0.6710100716628343, -0.4698463103929542], [0.7499999999999999, -0.4330127018922194], [0.8213938048432696, -0.383022221559489], [0.883022221559489, -0.32139380484326974], [0.9330127018922194, -0.24999999999999997], [0.9698463103929542, -0.17101007166283444], [0.9924038765061041, -0.08682408883346512], [1.0, -6.123233995736766e-17], [0.9924038765061041, 0.08682408883346523], [0.9698463103929542, 0.17101007166283433], [0.9330127018922193, 0.25000000000000006], [0.883022221559489, 0.3213938048432696], [0.8213938048432698, 0.38302222155948895], [0.7500000000000002, 0.4330127018922192], [0.6710100716628342, 0.4698463103929542], [0.5868240888334652, 0.492403876506104], [0.5000000000000001, 0.5], [0.413175911166535, 0.49240387650610407], [0.32898992833716545, 0.46984631039295416], [0.25, 0.4330127018922193], [0.17860619515673037, 0.38302222155948906], [0.11697777844051105, 0.3213938048432698], [0.06698729810778081, 0.2500000000000002], [0.030153689607045786, 0.17101007166283427], [0.00759612349389599, 0.0868240888334652]] # Example list of points
    #points = [[0, 0], [1.5,0.0]]

    while not rospy.is_shutdown():
        path_msg = create_path_message(points)
        path_pub.publish(path_msg)
        rate.sleep()

if __name__ == '__main__':
    try:
        path_publisher()
    except rospy.ROSInterruptException:
        pass

